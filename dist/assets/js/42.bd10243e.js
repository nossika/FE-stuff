(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{443:function(e,s,a){"use strict";a.r(s);var n=a(54),t=Object(n.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[e._v("#")]),e._v(" NPM")]),e._v(" "),a("h2",{attrs:{id:"package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[e._v("#")]),e._v(" package.json")]),e._v(" "),a("h3",{attrs:{id:"module-main"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-main"}},[e._v("#")]),e._v(" module & main")]),e._v(" "),a("p",[e._v("main指向此包被外部导入时的入口文件，cjs格式；module是esm格式的入口文件。")]),e._v(" "),a("h3",{attrs:{id:"scripts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scripts"}},[e._v("#")]),e._v(" scripts")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('scripts: {\n\t"foo": "node bin/foo.js --hot"\n}\n')])])]),a("p",[e._v("在包根目录可通过"),a("code",[e._v("npm run foo")]),e._v("来快捷执行script中test指向的命令"),a("code",[e._v("node bin/foo.js --hot")]),e._v("，在"),a("code",[e._v("foo.js")]),e._v("中可用process.argvs读取到命令行参数"),a("code",[e._v("--hot")]),e._v("。")]),e._v(" "),a("p",[e._v("scripts中有些特定脚本会在时机满足时自动运行，比如"),a("code",[e._v("postinstall")]),e._v("脚本会自动运行于"),a("code",[e._v("npm install")]),e._v("完成后。特定脚本可在官网"),a("a",{attrs:{href:"https://docs.npmjs.com/misc/scripts",target:"_blank",rel:"noopener noreferrer"}},[e._v("npm-scripts"),a("OutboundLink")],1),e._v("查阅。")]),e._v(" "),a("h2",{attrs:{id:"bin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bin"}},[e._v("#")]),e._v(" bin")]),e._v(" "),a("p",[e._v("一些npm包能以可执行文件的方式去运行，比如webpack、create-react-app等。")]),e._v(" "),a("p",[e._v("要使包能以可执行文件形式调用，需要配置package.json里的bin字段。")]),e._v(" "),a("p",[e._v("举个例子：")]),e._v(" "),a("p",[e._v("比如要创建一个叫my-bin的公共npm包，初始化my-bin项目，在项目中创建一个可执行文件"),a("code",[e._v("/bin/cli.js")]),e._v("，并在package.json中配置bin字段，发布到npm。")]),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("cli.js")]),e._v("中的文件首行应加上"),a("code",[e._v("#!/usr/bin/env node")]),e._v("表示该脚本以node环境运行")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// my-bin 的 package.json\nbin: {\n\t"my-bin": "bin/cli.js"\n}\n')])])]),a("p",[e._v("用户在自己项目执行"),a("code",[e._v("npm i my-bin")]),e._v("后，npm会将之前的"),a("code",[e._v("cli.js")]),e._v("复制到项目根目录下的"),a("code",[e._v("/node_module/.bin")]),e._v("，并重命名为"),a("code",[e._v("my-bin")]),e._v("；如果执行全局安装"),a("code",[e._v("npm i -g my-bin")]),e._v("，则会将其安装到全局的node目录下。")]),e._v(" "),a("p",[e._v("用户可以在项目根目录打开命令行手动调用")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ ./node_module/.bin/my-bin\n")])])]),a("p",[e._v("来执行my-bin，也可以写在package.json的script中来调用（script里不必写出my-bin的完整路径，因为"),a("code",[e._v("npm run test")]),e._v("时已经把"),a("code",[e._v("./node_module/.bin")]),e._v("添加到环境依赖了）")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// 用户项目 的 package.json\nscripts: {\n\t"test": "my-bin"\n}\n')])])]),a("p",[e._v("如果是全局安装，node已经默认把全局目录下的bin写进环境依赖了，直接在命令行里")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ my-bin\n")])])]),a("p",[e._v("就能调用。")]),e._v(" "),a("h2",{attrs:{id:"npm-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-install"}},[e._v("#")]),e._v(" npm install")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("npm i")]),e._v("：安装package.json中所有dependencies和devDependencies")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("npm i --production")]),e._v("：仅安装dependencies")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("npm i [module] [-S/-D] [-g]")]),e._v("：安装指定[module]到此目录下的node_modules，-S/-D表示并记录到package.json，-g表示是否安装到全局")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("npm uninstall [module] [-g]")]),e._v("：卸载指定[module]")])])])])}),[],!1,null,null,null);s.default=t.exports}}]);